From b0e912c28bc13d0e87e9a759cab8fa42b7942d93 Mon Sep 17 00:00:00 2001
From: "rajakumaran.a" <rajakumaran.a@lnttechservices.com>
Date: Fri, 6 Sep 2019 07:43:21 +0000
Subject: [PATCH] ccsp-lm-lite build failure

Signed-off-by: rajakumaran.a <rajakumaran.a@lnttechservices.com>
---
 recipes-ccsp/ccsp/ccsp-lm-lite.bbappend           |  1 +
 recipes-ccsp/ccsp/files/musl-header-missing.patch | 18 ++++++++++++++++++
 2 files changed, 19 insertions(+)
 create mode 100644 recipes-ccsp/ccsp/files/musl-header-missing.patch

diff --git a/recipes-ccsp/ccsp/ccsp-lm-lite.bbappend b/recipes-ccsp/ccsp/ccsp-lm-lite.bbappend
index ae5cc2f..d54b955 100644
--- a/recipes-ccsp/ccsp/ccsp-lm-lite.bbappend
+++ b/recipes-ccsp/ccsp/ccsp-lm-lite.bbappend
@@ -5,3 +5,4 @@ LDFLAGS_append = " -Wl,--no-as-needed"
 
 SRC_URI += "file://lmlite-avoid-l2sd0-check.patch"
 SRC_URI += "file://0001-ethwan-with-lmlite.patch"
+SRC_URI += "file://musl-header-missing.patch"
diff --git a/recipes-ccsp/ccsp/files/musl-header-missing.patch b/recipes-ccsp/ccsp/files/musl-header-missing.patch
new file mode 100644
index 0000000..4739ad2
--- /dev/null
+++ b/recipes-ccsp/ccsp/files/musl-header-missing.patch
@@ -0,0 +1,18 @@
+diff --git a/source/lm/device_presence_detection.c b/source/lm/device_presence_detection.c
+index df58c1a..f21e8bc 100644
+--- a/source/lm/device_presence_detection.c
++++ b/source/lm/device_presence_detection.c
+@@ -10,11 +10,11 @@
+ #include <netinet/ip.h>       // IP_MAXPACKET (which is 65535)
+ #include <arpa/inet.h>        // inet_pton() and inet_ntop()
+ #include <sys/ioctl.h>        // macro ioctl is defined
+-#include <bits/ioctls.h>      // defines values for argument "request" of ioctl.
++//#include <bits/ioctls.h>      // defines values for argument "request" of ioctl.
+ #include <net/if.h>           // struct ifreq
+ #include <linux/if_ether.h>   // ETH_P_ARP = 0x0806
+ #include <linux/if_packet.h>  // struct sockaddr_ll (see man 7 packet)
+-#include <net/ethernet.h>
++//#include <net/ethernet.h>
+ #include <pthread.h> 
+ #include <errno.h>            // errno, perror()
+ #include <sys/socket.h>
-- 
2.16.2


